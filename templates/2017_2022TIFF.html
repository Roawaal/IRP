CTYPE html>
<html lang="en" style="height: 50%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 50%; width: 50%;  margin: 0">
  <div id="container2" style="height: 50%"></div>

  <script src="https://unpkg.com/topojson@3"></script>
  <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.4.3/files/dist/echarts.min.js"></script>

  <script type="text/javascript">
    var data2017 = [
    { name: 'East Midlands', value: 614 },
    { name: 'Eastern', value: 643 },
    { name: 'North East', value: 176 },
    { name: 'North West', value: 310 },
    { name: 'South East', value: 477 },
    { name: 'South West', value: 771 },
    { name: 'West Midlands', value: 422 },
    { name: 'Yorkshire and The Humber', value: 412 },
    ];

    var data2018 = [
    { name: 'East Midlands', value: 580 },
    { name: 'Eastern', value: 602 },
    { name: 'North East', value: 147 },
    { name: 'North West', value: 195 },
    { name: 'South East', value: 457 },
    { name: 'South West', value: 603 },
    { name: 'West Midlands', value: 373 },
    { name: 'Yorkshire and The Humber', value: 335 },
    ];

    var data2019 = [
    { name: 'East Midlands', value: 620 },
    { name: 'Eastern', value: 739 },
    { name: 'North East', value: 216 },
    { name: 'North West', value: 225 },
    { name: 'South East', value: 505 },
    { name: 'South West', value: 634 },
    { name: 'West Midlands', value: 427 },
    { name: 'Yorkshire and The Humber', value: 415 },
    ];

    var data2020 = [
    { name: 'East Midlands', value: 591 },
    { name: 'Eastern', value: 670 },
    { name: 'North East', value: 147 },
    { name: 'North West', value: 242 },
    { name: 'South East', value: 518 },
    { name: 'South West', value: 682 },
    { name: 'West Midlands', value: 469 },
    { name: 'Yorkshire and The Humber', value: 370 },
    ];

    var data2021 = [
    { name: 'East Midlands', value: 882 },
    { name: 'Eastern', value: 1017 },
    { name: 'North East', value: 217 },
    { name: 'North West', value: 290 },
    { name: 'South East', value: 688 },
    { name: 'South West', value: 810 },
    { name: 'West Midlands', value: 601 },
    { name: 'Yorkshire and The Humber', value: 568 },
    ];

    var data2022 = [
    { name: 'East Midlands', value: 939 },
    { name: 'Eastern', value: 1094 },
    { name: 'North East', value: 258 },
    { name: 'North West', value: 383 },
    { name: 'South East', value: 813 },
    { name: 'South West', value: 979 },
    { name: 'West Midlands', value: 644 },
    { name: 'Yorkshire and The Humber', value: 622 },
    ];

    var myChart2 = echarts.init(document.getElementById('container2'), null, {
      renderer: 'canvas',
      useDirtyRect: false
    });

    myChart2.showLoading();
    $.get('static/geojson/england.json', function (ukJson) {
      myChart2.hideLoading();
      echarts.registerMap('UK', topojson.feature(ukJson, ukJson.objects.eer));

      var baseOption = {
        timeline: {
          axisType: 'category',
          rewind: true,  // Allow rewind on end
          loop: false,  // Disable loop
          playInterval: 3000,  // Set play interval (ms)
          autoPlay: false,
          data: ['2017', '2018', '2019', '2020', '2021', '2022'],
          label: {
            formatter : function(s) {
              return s;
            }
          },
          controlStyle: {
            showPlayBtn: false,  // Hide play button
            showNextBtn: true,
            showPrevBtn: true
          }
        },
        title: {
          text: '2022 English farm statistics: Total Income from Farming (TIFF)',
          subtext: 'in million GBP at 2022 prices',
          sublink: 'https://www.gov.uk/government/statistics/agricultural-facts-england-regional-profiles',
          left: 'right'
        },
        tooltip: {
          trigger: 'item',
          showDelay: 0,
          transitionDuration: 0.2
        },
        visualMap: {
          left: 'right',
          min: 0,
          max: 1000,
          inRange: {
            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61']
          },
          text: ['High', 'Low'],
          calculable: true
        },
        toolbox: {
          show: true,
          left: 'left',
          top: 'top',
          feature: {
            dataView: { readOnly: false },
            restore: {},
            saveAsImage: {}
          }
        },
        series: [
          {
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            map: 'UK',
            emphasis: { label: { show: true } }
          }
        ]
      };

      var options = [
        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2017 }], title: { text: '2017 English TIFF' } },

        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2018 } ], title: { text: '2018 English TIFF' } },

        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2019 } ], title: { text: '2019 English TIFF' } },

        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2020 } ], title: { text: '2020 English TIFF' } },

        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2021 } ], title: { text: '2021 English TIFF' } },

        { series: [{
            name: 'Total Income from Farming (TIFF)',
            type: 'map',
            roam: true,
            map: 'UK',
            emphasis: {
              label: {
                show: true
              }
            },
            data: data2022 } ], title: { text: '2022 English TIFF' } },

      ];

      myChart2.setOption({
        baseOption: baseOption,
        options: options
      });
    });

    window.addEventListener('resize', myChart2.resize);
  </script>
</body>
</html>
