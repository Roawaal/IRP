<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
  <title>Dynamic Timeline Chart</title>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/echarts.min.js"></script>
</head>
<body style="height: 100%; margin: 0">
  <div id="container12" style="height: 50%"></div>

  <script type="text/javascript">
    var dom12 = document.getElementById('container12');
    var myChart12 = echarts.init(dom12, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};

    var years = ['2015', '2016', '2017', '2018', '2019', '2020', '2021'];
    var data = {
      'World': [32495894.8, 30574626.32,31608359.47,33598109.42, 33345267.88,34196806.39,33841414.98],
      'Europe': [25173685.78, 23769395.94,24653578.06,26113849.25,26131081.71,26761032.45,25927791.28],
      'Central Asia': [182947.27, 165518.78, 188467.31, 218294.95 , 225269.2 ,238922.66  ,238688.93],
      'East Asia&Pacific':[2489698.33,2396836.20,2440041.33,2608647.48,2615176.59,  2637294.50,2727256.69] ,
      'North America': [  1467422.84, 1153008.76,1259140.65,1402970.29,1279235.89,1296946.38,1348757.44],
      'Middle East&North Africa': [  96047.15,  99777.08,108547.34,114433.82 ,102163.43,113210.79,138606.20],
      'Latin America&Caribbean': [ 1965960.93, 1914271.52, 1869005.88,1982088.10,1913140.34, 1936621.90,2232162.27],
      'Sub-Saharan Africa': [ 900986.20, 857227.96,851897.89,887487.55,809120.78,883231.00,823231.09],
      'South Asia': [198802.67,  198584.40,212579.77,247920.15,249905.48,281467.61,367967.84]
    };

    function generateOptions() {
      return years.map((year, index) => {
        var seriesData = Object.keys(data).map(region => ({
          value: data[region][index],
          name: region
        }));
        return {
          title: { text: year + ' Data' },
          series: [{ data: seriesData }]
        };
      });
    }

    var option12 = {
      baseOption: {
        timeline: {
          axisType: 'category',
          autoPlay: true,
          playInterval: 1500,
          data: years
        },
        legend: {
          top: 'bottom'
        },
        toolbox: {
          show: true,
          feature: {
            dataView: { show: true, readOnly: false },
            restore: { show: true },
            saveAsImage: { show: true }
          }
        },
        series: [
          {
            name: 'Nightingale Chart',
            type: 'pie',
            radius: [50, 250],
            center: ['50%', '50%'],
            roseType: 'area',
            itemStyle: {
              borderRadius: 8
            }
          }
        ]
      },
      options: generateOptions()
    };

    if (option12 && typeof option12 === 'object') {
      myChart12.setOption(option12);
    }

    window.addEventListener('resize', myChart12.resize);
  </script>
</body>
</html>
